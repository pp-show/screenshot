(()=>{const e=[];chrome.runtime.onMessage.addListener((function(t,n,o){if("fetchPageSize"===t.message){const e=(()=>{const e=location.href;return e.indexOf(".jd.com")>-1?document.querySelector('.p-price [class^="price J-p-"]')?.innerText||0:e.indexOf(".suning.com")>-1?document.querySelector(".mainprice")?.innerText?.replace(/[^\d|.]/g,"")||0:e.indexOf(".tmall.com")>-1?document.querySelector('[class^="Price--priceText--"]')?.innerText||0:void 0})();console.log(e,"priceprice"),o({scrollHeight:document.body.scrollHeight,scrollWidth:document.body.scrollWidth,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight,title:document.title,price:e})}else"scrollPage"===t.message?0===t.y?document.scrollingElement.scrollTop=0:(window.scrollBy(0,window.innerHeight),setTimeout((()=>{(()=>{const t=document.body.getElementsByTagName("*"),n=t.length;for(let o=0;o<n;o++)"fixed"!=window.getComputedStyle(t[o],null).getPropertyValue("position")&&"sticky"!=window.getComputedStyle(t[o],null).getPropertyValue("position")||(e.push(t[o]),t[o].style.opacity=0)})()}),20)):"finish"===t.message?(document.scrollingElement.scrollTop=0,e.map((e=>{e.style.removeProperty("opacity")}))):"patch"===t.message&&o((e=>{const t=document.querySelectorAll(".screenshotBtn"),n=!(location.href.indexOf("/price-inspection")>-1);let o=!1;return e.map((e=>{for(let l of t){if(l.status)continue;let t,i,c,r;n?(c="blur",t=l.previousElementSibling,i=l.parentElement.parentElement,r=i.querySelector('[id^="skuPrices|basePrice|"]')):(t=l.parentElement.parentElement.parentElement,i=l.parentElement,c="change",r=t.querySelector(".ant-input-number-handler-wrap-hide")?.querySelector(".ant-input-number-input"));const s=t.querySelector(".ant-upload-list-item-name"),u=i.querySelector(".lowerPrice");if(!s){const t={screenShotUrl:e.imgUrl},n=new CustomEvent("click",{detail:t,bubbles:!0});if(l.dispatchEvent(n),u){u.value=e.url;const t=new CustomEvent(c,{bubbles:!0});u.dispatchEvent(t)}if(r){r.value=e.price;const t=new CustomEvent(c,{bubbles:!0});r.dispatchEvent(t)}o=!0,l.status=o;break}}})),o})(t.item))}))})();